<!--
`<wine-search-result>` is Description

@element WineSearchResult
-->
<dom-module id="wine-search-result">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        display: block
      }
      .price {
        color: var(--default-primary-color);
      }
      .vintage {
        color: var(--dark-primary-color);
        /*font-weight: bold;*/
      }
      a {
        color: var(--default-primary-color);
      }
      .publisher {
        color: var(--secondary-text-color);
      }
    </style>

    <div style="display:flex">
      <h1 style="flex:1"><span class="vintage">[[result.vintage]]</span> [[result.name]]</h2>
      <h2 class="price">
        <span>$[[price]]</span>
      </h4>
    </div>

    <table style="border-spacing: 6px">
      <tr hidden$="[[!result.winetype]]"><td><b>Wine Type</b></td><td>[[result.winetype]]</td></tr>
      <tr hidden$="[[!result.color]]"><td><b>Color</b></td><td>[[result.color]]</td></tr>
      <tr hidden$="[[!result.country]]"><td><b>Country</b></td><td>[[result.country]]</td></tr>
      <tr hidden$="[[!result.bottletype]]"><td><b>Bottle Type</b></td><td>[[result.bottletype]]</td></tr>
    </table>

    <div style="display: flex; align-items: flex-end">

      <div class="publisher" style="flex:1">
        <h3 style="margin-bottom:0">Published [[result.publication_date]]</h3>
        <div>[[result.publisher]]</div>
        <div>[[result.title]]</div>
      </div>

      <div style="text-align: right">
        <a href$="[[editUrl]]" target="_blank"><paper-icon-button icon="create"></paper-icon-button></a>
      </div>
    </div>
  </template>

  <script>
    class WineSearchResult extends AppBaseElement {

      static get is() { return 'wine-search-result'; }

      static get properties() {
        return {
          result : {
            type : Object,
            value : function() {
              return {};
            }
          },
          price : {
            type : String,
            computed : '_price(result)'
          },
          editUrl : {
            type : String,
            computed : '_editUrl(result)'
          }
        };
      }

      _price(result) {
        return result.perprice.toFixed(2);
      }

      _editUrl(result) {
        return `https://ptv.library.ucdavis.edu/#${result.catalog_id}/${result.page_id}/view/${result.mark_id}`;
      }

    }

    window.customElements.define(WineSearchResult.is, WineSearchResult);
  </script>
</dom-module>