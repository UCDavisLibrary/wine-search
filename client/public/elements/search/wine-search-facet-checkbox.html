
<dom-module id="wine-search-facet-checkbox">
  <template>
    <style>
      :host {
        display: inline-block;
      }
    </style>

    

  </template>

  <script>
    class WineSearchFacetCheckbox extends Polymer.Element {

      static get is() { return 'wine-search-facet-checkbox'; }

      static get properties() {
        return {
          type : {
            type : String,
            value : ''
          },
          value : {
            type : String,
            value : '',
            observer : '_onValueChange'
          },
          checked : {
            type : Boolean,
            value : false,
            notify : true,
            observer : '_onCheckedChange'
          }
        };
      }

      ready() {
        super.ready();

        if( this.type.toLowerCase() === 'country' ) {
          this.ele = document.createElement('flag-checkbox');
        } else {
          this.ele = document.createElement('normal-checkbox');
        }
        
        if( this.value ) {
          this.ele.setAttribute('value', this.value);
        }
        if( this.checked ) {
          this.ele.setAttribute('checked', this.checked);
        }

        this.ele.addEventListener('checked-changed', (e) => {
          this.checked = e.detail.value;
        })

        this.shadowRoot.appendChild(this.ele);
      }

      _onCheckedChange() {
        if( !this.ele || this.ele.checked === this.checked ) return;
        this.ele.checked = this.checked;
      }

      _onValueChange() {
        if( !this.ele ) return;
        this.ele.setAttribute('value', value);
      }

    }

    window.customElements.define(WineSearchFacetCheckbox.is, WineSearchFacetCheckbox);
  </script>
</dom-module>